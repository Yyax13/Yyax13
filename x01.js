setTimeout(async () => { try { const [rawFetchIDUrl, authCookie] = [window.location.href.split('/'), `Bearer ${localStorage.getItem("Token")}`]; const fetchResponseBody = await (await fetch(`https://redacao-api.pr.gov.br/api/v2/proposta/${rawFetchIDUrl[4]}/estudante/${rawFetchIDUrl[5]}`, { method: "GET", headers: { 'Authorization': authCookie, 'Access-Control-Allow-Origin': '*', 'Content-Type': 'application/json' } })).json(); const response = await fetch(`https://redacao-api.pr.gov.br/api/v2/Essay/student/SaveEssay/${fetchResponseBody.redacao.uIdRedacao}`, { method: 'POST', headers: { 'Authorization': authCookie, 'Access-Control-Allow-Origin': '*', 'Content-Type': 'application/json' }, body: JSON.stringify({ essayId: fetchResponseBody.proposta.idProposta, text: prompt("Insira o texto (redação)"), title: prompt("Insira o título"), status: 2 }) }); console.log('Status:', response.status, 'Response:', await response.text()); } catch (error) { console.error('Error:', error); } location.reload(); }, 3000);
